<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Topic 11 Applied Mediation Analysis | STAT 394: Causal Inference</title>
  <meta name="description" content="This is the class website for Causal Inference at Macalester College." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Topic 11 Applied Mediation Analysis | STAT 394: Causal Inference" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is the class website for Causal Inference at Macalester College." />
  <meta name="github-repo" content="lmyint/causal_spring_2020" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Topic 11 Applied Mediation Analysis | STAT 394: Causal Inference" />
  
  <meta name="twitter:description" content="This is the class website for Causal Inference at Macalester College." />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="graphical-structure-of-mediation.html"/>
<link rel="next" href="rct-and-iv-designs.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #2a211c; color: #bdae9d; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; background-color: #2a211c; color: #bdae9d; border-right: 1px solid #bdae9d; }
td.sourceCode { padding-left: 5px; }
pre, code { color: #bdae9d; background-color: #2a211c; }
code > span.kw { color: #43a8ed; font-weight: bold; } /* Keyword */
code > span.dt { text-decoration: underline; } /* DataType */
code > span.dv { color: #44aa43; } /* DecVal */
code > span.bn { color: #44aa43; } /* BaseN */
code > span.fl { color: #44aa43; } /* Float */
code > span.ch { color: #049b0a; } /* Char */
code > span.st { color: #049b0a; } /* String */
code > span.co { color: #0066ff; font-style: italic; } /* Comment */
code > span.al { color: #ffff00; } /* Alert */
code > span.fu { color: #ff9358; font-weight: bold; } /* Function */
code > span.er { color: #ffff00; font-weight: bold; } /* Error */
code > span.wa { color: #ffff00; font-weight: bold; } /* Warning */
code > span.cn { } /* Constant */
code > span.sc { color: #049b0a; } /* SpecialChar */
code > span.vs { color: #049b0a; } /* VerbatimString */
code > span.ss { color: #049b0a; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { } /* Variable */
code > span.cf { color: #43a8ed; font-weight: bold; } /* ControlFlow */
code > span.op { } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { font-weight: bold; } /* Preprocessor */
code > span.at { } /* Attribute */
code > span.do { color: #0066ff; font-style: italic; } /* Documentation */
code > span.an { color: #0066ff; font-weight: bold; font-style: italic; } /* Annotation */
code > span.co { color: #0066ff; font-weight: bold; font-style: italic; } /* Comment */
code > span.in { color: #0066ff; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="custom_styles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href = "./">STAT 394: Causal Inference</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome!</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="" data-path="schedule.html"><a href="schedule.html"><i class="fa fa-check"></i>Schedule</a><ul>
<li class="chapter" data-level="" data-path="schedule.html"><a href="schedule.html#week-1"><i class="fa fa-check"></i>Week 1</a></li>
<li class="chapter" data-level="" data-path="schedule.html"><a href="schedule.html#week-2"><i class="fa fa-check"></i>Week 2</a></li>
<li class="chapter" data-level="" data-path="schedule.html"><a href="schedule.html#week-3"><i class="fa fa-check"></i>Week 3</a></li>
<li class="chapter" data-level="" data-path="schedule.html"><a href="schedule.html#week-4"><i class="fa fa-check"></i>Week 4</a></li>
<li class="chapter" data-level="" data-path="schedule.html"><a href="schedule.html#week-5"><i class="fa fa-check"></i>Week 5</a></li>
<li class="chapter" data-level="" data-path="schedule.html"><a href="schedule.html#week-6"><i class="fa fa-check"></i>Week 6</a></li>
<li class="chapter" data-level="" data-path="schedule.html"><a href="schedule.html#week-7"><i class="fa fa-check"></i>Week 7</a></li>
<li class="chapter" data-level="" data-path="schedule.html"><a href="schedule.html#week-8"><i class="fa fa-check"></i>Week 8</a></li>
<li class="chapter" data-level="" data-path="schedule.html"><a href="schedule.html#spring-break-316---327"><i class="fa fa-check"></i>Spring Break: 3/16 - 3/27</a></li>
<li class="chapter" data-level="" data-path="schedule.html"><a href="schedule.html#week-9-330---43"><i class="fa fa-check"></i>Week 9: 3/30 - 4/3</a></li>
<li class="chapter" data-level="" data-path="schedule.html"><a href="schedule.html#week-10-46---410"><i class="fa fa-check"></i>Week 10: 4/6 - 4/10</a></li>
</ul></li>
<li class="part"><span><b>I Causal Diagram Fundamentals</b></span></li>
<li class="chapter" data-level="1" data-path="introductions-review-and-motivation.html"><a href="introductions-review-and-motivation.html"><i class="fa fa-check"></i><b>1</b> Introductions, Review, and Motivation</a><ul>
<li class="chapter" data-level="" data-path="introductions-review-and-motivation.html"><a href="introductions-review-and-motivation.html#learning-goals"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="introductions-review-and-motivation.html"><a href="introductions-review-and-motivation.html#review-regression-models"><i class="fa fa-check"></i>Review: Regression Models</a></li>
<li class="chapter" data-level="" data-path="introductions-review-and-motivation.html"><a href="introductions-review-and-motivation.html#exercises"><i class="fa fa-check"></i>Exercises</a><ul>
<li class="chapter" data-level="" data-path="introductions-review-and-motivation.html"><a href="introductions-review-and-motivation.html#exercise-1"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="introductions-review-and-motivation.html"><a href="introductions-review-and-motivation.html#exercise-2"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="introductions-review-and-motivation.html"><a href="introductions-review-and-motivation.html#exercise-3"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="probability-and-dags.html"><a href="probability-and-dags.html"><i class="fa fa-check"></i><b>2</b> Probability and DAGs</a><ul>
<li class="chapter" data-level="" data-path="probability-and-dags.html"><a href="probability-and-dags.html#learning-goals-1"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="probability-and-dags.html"><a href="probability-and-dags.html#goal-1"><i class="fa fa-check"></i>Goal 1</a></li>
<li class="chapter" data-level="" data-path="probability-and-dags.html"><a href="probability-and-dags.html#lead-in-to-r-activity-poll"><i class="fa fa-check"></i>Lead-in to R activity: Poll</a></li>
<li class="chapter" data-level="" data-path="probability-and-dags.html"><a href="probability-and-dags.html#discussion"><i class="fa fa-check"></i>Discussion</a></li>
<li class="chapter" data-level="" data-path="probability-and-dags.html"><a href="probability-and-dags.html#r-exercises"><i class="fa fa-check"></i>R Exercises</a><ul>
<li class="chapter" data-level="" data-path="probability-and-dags.html"><a href="probability-and-dags.html#exercise-1-1"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="probability-and-dags.html"><a href="probability-and-dags.html#exercise-2-1"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="probability-and-dags.html"><a href="probability-and-dags.html#exercise-3-1"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="probability-and-dags.html"><a href="probability-and-dags.html#conceptual-exercises"><i class="fa fa-check"></i>Conceptual Exercises</a><ul>
<li class="chapter" data-level="" data-path="probability-and-dags.html"><a href="probability-and-dags.html#exercise-4"><i class="fa fa-check"></i>Exercise 4</a></li>
<li class="chapter" data-level="" data-path="probability-and-dags.html"><a href="probability-and-dags.html#exercise-5"><i class="fa fa-check"></i>Exercise 5</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="d-separation-part-1.html"><a href="d-separation-part-1.html"><i class="fa fa-check"></i><b>3</b> d-separation (Part 1)</a><ul>
<li class="chapter" data-level="" data-path="d-separation-part-1.html"><a href="d-separation-part-1.html#learning-goals-2"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="d-separation-part-1.html"><a href="d-separation-part-1.html#discussion-d-separation"><i class="fa fa-check"></i>Discussion: d-separation</a></li>
<li class="chapter" data-level="" data-path="d-separation-part-1.html"><a href="d-separation-part-1.html#discussion-the-birth-weight-paradox"><i class="fa fa-check"></i>Discussion: The Birth Weight Paradox</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="d-separation-part-2.html"><a href="d-separation-part-2.html"><i class="fa fa-check"></i><b>4</b> d-separation (Part 2)</a><ul>
<li class="chapter" data-level="" data-path="d-separation-part-2.html"><a href="d-separation-part-2.html#learning-goals-3"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="d-separation-part-2.html"><a href="d-separation-part-2.html#why-care"><i class="fa fa-check"></i>Why care?</a></li>
<li class="chapter" data-level="" data-path="d-separation-part-2.html"><a href="d-separation-part-2.html#example-folic-acid-and-birth-defects"><i class="fa fa-check"></i>Example: Folic Acid and Birth Defects</a></li>
<li class="chapter" data-level="" data-path="d-separation-part-2.html"><a href="d-separation-part-2.html#example-selection-bias"><i class="fa fa-check"></i>Example: Selection Bias</a></li>
<li class="chapter" data-level="" data-path="d-separation-part-2.html"><a href="d-separation-part-2.html#example-estrogens-and-uterine-cancer"><i class="fa fa-check"></i>Example: Estrogens and Uterine Cancer</a></li>
<li class="chapter" data-level="" data-path="d-separation-part-2.html"><a href="d-separation-part-2.html#principles-of-building-causal-diagrams"><i class="fa fa-check"></i>Principles of building causal diagrams</a></li>
</ul></li>
<li class="part"><span><b>II Causal Effect Estimation</b></span></li>
<li class="chapter" data-level="5" data-path="estimating-causal-effects.html"><a href="estimating-causal-effects.html"><i class="fa fa-check"></i><b>5</b> Estimating causal effects</a><ul>
<li class="chapter" data-level="" data-path="estimating-causal-effects.html"><a href="estimating-causal-effects.html#learning-goals-4"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="estimating-causal-effects.html"><a href="estimating-causal-effects.html#exercise-dag-construction"><i class="fa fa-check"></i>Exercise: DAG construction</a></li>
<li class="chapter" data-level="" data-path="estimating-causal-effects.html"><a href="estimating-causal-effects.html#warm-up-d-separation"><i class="fa fa-check"></i>Warm-up: d-separation</a></li>
<li class="chapter" data-level="" data-path="estimating-causal-effects.html"><a href="estimating-causal-effects.html#discussion-estimating-causal-effects"><i class="fa fa-check"></i>Discussion: Estimating causal effects</a><ul>
<li class="chapter" data-level="" data-path="estimating-causal-effects.html"><a href="estimating-causal-effects.html#worksheet-developing-ideas"><i class="fa fa-check"></i>Worksheet: developing ideas</a></li>
<li class="chapter" data-level="" data-path="estimating-causal-effects.html"><a href="estimating-causal-effects.html#notes-deriving-inverse-probability-weighting"><i class="fa fa-check"></i>Notes: deriving inverse probability weighting</a></li>
<li class="chapter" data-level="" data-path="estimating-causal-effects.html"><a href="estimating-causal-effects.html#exercise-simulation-planning"><i class="fa fa-check"></i>Exercise: Simulation planning</a></li>
<li class="chapter" data-level="" data-path="estimating-causal-effects.html"><a href="estimating-causal-effects.html#simulation-example"><i class="fa fa-check"></i>Simulation example</a></li>
<li class="chapter" data-level="" data-path="estimating-causal-effects.html"><a href="estimating-causal-effects.html#on-your-own"><i class="fa fa-check"></i>On your own</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ip-weighting-in-practice.html"><a href="ip-weighting-in-practice.html"><i class="fa fa-check"></i><b>6</b> IP weighting in practice</a><ul>
<li class="chapter" data-level="" data-path="ip-weighting-in-practice.html"><a href="ip-weighting-in-practice.html#learning-goals-5"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="ip-weighting-in-practice.html"><a href="ip-weighting-in-practice.html#discussion-1"><i class="fa fa-check"></i>Discussion</a></li>
<li class="chapter" data-level="" data-path="ip-weighting-in-practice.html"><a href="ip-weighting-in-practice.html#analysis"><i class="fa fa-check"></i>Analysis</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ip-weighting-for-censoring.html"><a href="ip-weighting-for-censoring.html"><i class="fa fa-check"></i><b>7</b> IP weighting for censoring</a><ul>
<li class="chapter" data-level="" data-path="ip-weighting-for-censoring.html"><a href="ip-weighting-for-censoring.html#learning-goals-6"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="ip-weighting-for-censoring.html"><a href="ip-weighting-for-censoring.html#discussion-2"><i class="fa fa-check"></i>Discussion</a></li>
<li class="chapter" data-level="" data-path="ip-weighting-for-censoring.html"><a href="ip-weighting-for-censoring.html#exercises-1"><i class="fa fa-check"></i>Exercises</a><ul>
<li class="chapter" data-level="" data-path="ip-weighting-for-censoring.html"><a href="ip-weighting-for-censoring.html#setup"><i class="fa fa-check"></i>Setup</a></li>
<li class="chapter" data-level="" data-path="ip-weighting-for-censoring.html"><a href="ip-weighting-for-censoring.html#part-1-modeling-to-obtain-weights"><i class="fa fa-check"></i>Part 1: Modeling to obtain weights</a></li>
<li class="chapter" data-level="" data-path="ip-weighting-for-censoring.html"><a href="ip-weighting-for-censoring.html#part-2-fitting-msms"><i class="fa fa-check"></i>Part 2: Fitting MSMs</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Causal Discovery</b></span></li>
<li class="chapter" data-level="8" data-path="causal-discovery.html"><a href="causal-discovery.html"><i class="fa fa-check"></i><b>8</b> Causal Discovery</a><ul>
<li class="chapter" data-level="" data-path="causal-discovery.html"><a href="causal-discovery.html#learning-goals-7"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="causal-discovery.html"><a href="causal-discovery.html#discussion-3"><i class="fa fa-check"></i>Discussion</a></li>
<li class="chapter" data-level="" data-path="causal-discovery.html"><a href="causal-discovery.html#exercises-2"><i class="fa fa-check"></i>Exercises</a><ul>
<li class="chapter" data-level="" data-path="causal-discovery.html"><a href="causal-discovery.html#exercise-1-2"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="causal-discovery.html"><a href="causal-discovery.html#exercise-2-2"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="causal-discovery.html"><a href="causal-discovery.html#exercise-3-2"><i class="fa fa-check"></i>Exercise 3</a></li>
<li class="chapter" data-level="" data-path="causal-discovery.html"><a href="causal-discovery.html#exercise-4-1"><i class="fa fa-check"></i>Exercise 4</a></li>
<li class="chapter" data-level="" data-path="causal-discovery.html"><a href="causal-discovery.html#exercise-5-1"><i class="fa fa-check"></i>Exercise 5</a></li>
<li class="chapter" data-level="" data-path="causal-discovery.html"><a href="causal-discovery.html#exercise-6"><i class="fa fa-check"></i>Exercise 6</a></li>
<li class="chapter" data-level="" data-path="causal-discovery.html"><a href="causal-discovery.html#exercise-7"><i class="fa fa-check"></i>Exercise 7</a></li>
<li class="chapter" data-level="" data-path="causal-discovery.html"><a href="causal-discovery.html#exercise-8"><i class="fa fa-check"></i>Exercise 8</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Sensitivity Analyses</b></span></li>
<li class="chapter" data-level="9" data-path="sensitivity-analyses-for-unmeasured-confounding.html"><a href="sensitivity-analyses-for-unmeasured-confounding.html"><i class="fa fa-check"></i><b>9</b> Sensitivity Analyses for Unmeasured Confounding</a><ul>
<li class="chapter" data-level="" data-path="sensitivity-analyses-for-unmeasured-confounding.html"><a href="sensitivity-analyses-for-unmeasured-confounding.html#learning-goals-8"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="sensitivity-analyses-for-unmeasured-confounding.html"><a href="sensitivity-analyses-for-unmeasured-confounding.html#exercises-3"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="part"><span><b>V Mediation Analysis</b></span></li>
<li class="chapter" data-level="10" data-path="graphical-structure-of-mediation.html"><a href="graphical-structure-of-mediation.html"><i class="fa fa-check"></i><b>10</b> Graphical Structure of Mediation</a><ul>
<li class="chapter" data-level="" data-path="graphical-structure-of-mediation.html"><a href="graphical-structure-of-mediation.html#learning-goals-9"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="graphical-structure-of-mediation.html"><a href="graphical-structure-of-mediation.html#warm-up"><i class="fa fa-check"></i>Warm-up</a></li>
<li class="chapter" data-level="" data-path="graphical-structure-of-mediation.html"><a href="graphical-structure-of-mediation.html#exercises-4"><i class="fa fa-check"></i>Exercises</a><ul>
<li class="chapter" data-level="" data-path="graphical-structure-of-mediation.html"><a href="graphical-structure-of-mediation.html#background"><i class="fa fa-check"></i>Background</a></li>
<li class="chapter" data-level="" data-path="graphical-structure-of-mediation.html"><a href="graphical-structure-of-mediation.html#exercise-1-3"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="graphical-structure-of-mediation.html"><a href="graphical-structure-of-mediation.html#exercise-2-3"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="graphical-structure-of-mediation.html"><a href="graphical-structure-of-mediation.html#exercise-3-3"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="applied-mediation-analysis.html"><a href="applied-mediation-analysis.html"><i class="fa fa-check"></i><b>11</b> Applied Mediation Analysis</a><ul>
<li class="chapter" data-level="" data-path="applied-mediation-analysis.html"><a href="applied-mediation-analysis.html#learning-goals-10"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="applied-mediation-analysis.html"><a href="applied-mediation-analysis.html#discussion-4"><i class="fa fa-check"></i>Discussion</a></li>
<li class="chapter" data-level="" data-path="applied-mediation-analysis.html"><a href="applied-mediation-analysis.html#exercises-5"><i class="fa fa-check"></i>Exercises</a><ul>
<li class="chapter" data-level="" data-path="applied-mediation-analysis.html"><a href="applied-mediation-analysis.html#data-context"><i class="fa fa-check"></i>Data context</a></li>
<li class="chapter" data-level="" data-path="applied-mediation-analysis.html"><a href="applied-mediation-analysis.html#exercise-1-4"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="applied-mediation-analysis.html"><a href="applied-mediation-analysis.html#exercise-2-4"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="applied-mediation-analysis.html"><a href="applied-mediation-analysis.html#exercise-3-4"><i class="fa fa-check"></i>Exercise 3</a></li>
<li class="chapter" data-level="" data-path="applied-mediation-analysis.html"><a href="applied-mediation-analysis.html#exercise-4-2"><i class="fa fa-check"></i>Exercise 4</a></li>
<li class="chapter" data-level="" data-path="applied-mediation-analysis.html"><a href="applied-mediation-analysis.html#exercise-5-2"><i class="fa fa-check"></i>Exercise 5</a></li>
<li class="chapter" data-level="" data-path="applied-mediation-analysis.html"><a href="applied-mediation-analysis.html#exercise-6-1"><i class="fa fa-check"></i>Exercise 6</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VI Study Designs</b></span></li>
<li class="chapter" data-level="12" data-path="rct-and-iv-designs.html"><a href="rct-and-iv-designs.html"><i class="fa fa-check"></i><b>12</b> RCT and IV designs</a><ul>
<li class="chapter" data-level="" data-path="rct-and-iv-designs.html"><a href="rct-and-iv-designs.html#learning-goals-11"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="rct-and-iv-designs.html"><a href="rct-and-iv-designs.html#warm-up-1"><i class="fa fa-check"></i>Warm-up</a></li>
<li class="chapter" data-level="" data-path="rct-and-iv-designs.html"><a href="rct-and-iv-designs.html#discussion-5"><i class="fa fa-check"></i>Discussion</a></li>
<li class="chapter" data-level="" data-path="rct-and-iv-designs.html"><a href="rct-and-iv-designs.html#exercises-6"><i class="fa fa-check"></i>Exercises</a><ul>
<li class="chapter" data-level="" data-path="rct-and-iv-designs.html"><a href="rct-and-iv-designs.html#iv-assumptions"><i class="fa fa-check"></i>IV assumptions</a></li>
<li class="chapter" data-level="" data-path="rct-and-iv-designs.html"><a href="rct-and-iv-designs.html#simulation-planning"><i class="fa fa-check"></i>Simulation planning</a></li>
<li class="chapter" data-level="" data-path="rct-and-iv-designs.html"><a href="rct-and-iv-designs.html#simulation-setting-up-helper-functions"><i class="fa fa-check"></i>Simulation: setting up helper functions</a></li>
<li class="chapter" data-level="" data-path="rct-and-iv-designs.html"><a href="rct-and-iv-designs.html#running-the-simulation"><i class="fa fa-check"></i>Running the simulation</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VII Homework</b></span></li>
<li class="chapter" data-level="" data-path="homework-1.html"><a href="homework-1.html"><i class="fa fa-check"></i>Homework 1</a><ul>
<li class="chapter" data-level="" data-path="homework-1.html"><a href="homework-1.html#conceptual-exercises-1"><i class="fa fa-check"></i>Conceptual Exercises</a><ul>
<li class="chapter" data-level="" data-path="homework-1.html"><a href="homework-1.html#exercise-1-5"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="homework-1.html"><a href="homework-1.html#exercise-2-5"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="homework-1.html"><a href="homework-1.html#exercise-3-5"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="homework-1.html"><a href="homework-1.html#simulation-exercises"><i class="fa fa-check"></i>Simulation Exercises</a><ul>
<li class="chapter" data-level="" data-path="homework-1.html"><a href="homework-1.html#exercise-4-3"><i class="fa fa-check"></i>Exercise 4</a></li>
<li class="chapter" data-level="" data-path="homework-1.html"><a href="homework-1.html#exercise-5-3"><i class="fa fa-check"></i>Exercise 5</a></li>
<li class="chapter" data-level="" data-path="homework-1.html"><a href="homework-1.html#exercise-6-2"><i class="fa fa-check"></i>Exercise 6</a></li>
<li class="chapter" data-level="" data-path="homework-1.html"><a href="homework-1.html#exercise-7-1"><i class="fa fa-check"></i>Exercise 7</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="homework-1.html"><a href="homework-1.html#portfolio"><i class="fa fa-check"></i>Portfolio</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="homework-2.html"><a href="homework-2.html"><i class="fa fa-check"></i>Homework 2</a><ul>
<li class="chapter" data-level="" data-path="homework-2.html"><a href="homework-2.html#in-class-activities-estimating-causal-effects"><i class="fa fa-check"></i>In-class activities: Estimating causal effects</a></li>
<li class="chapter" data-level="" data-path="homework-2.html"><a href="homework-2.html#in-class-activities-ip-weighting-in-practice"><i class="fa fa-check"></i>In-class activities: IP weighting in practice</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="homework-3.html"><a href="homework-3.html"><i class="fa fa-check"></i>Homework 3</a></li>
<li class="part"><span><b>VIII Projects</b></span></li>
<li class="chapter" data-level="" data-path="portfolio-1.html"><a href="portfolio-1.html"><i class="fa fa-check"></i>Portfolio</a><ul>
<li class="chapter" data-level="" data-path="portfolio-1.html"><a href="portfolio-1.html#required-topics"><i class="fa fa-check"></i>Required Topics</a><ul>
<li class="chapter" data-level="" data-path="portfolio-1.html"><a href="portfolio-1.html#post-1"><i class="fa fa-check"></i>Post 1</a></li>
<li class="chapter" data-level="" data-path="portfolio-1.html"><a href="portfolio-1.html#post-2"><i class="fa fa-check"></i>Post 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="portfolio-1.html"><a href="portfolio-1.html#iterative-progress"><i class="fa fa-check"></i>Iterative Progress</a></li>
<li class="chapter" data-level="" data-path="portfolio-1.html"><a href="portfolio-1.html#building-a-personal-website"><i class="fa fa-check"></i>Building a Personal Website</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">STAT 394: Causal Inference</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="applied-mediation-analysis" class="section level1">
<h1><span class="header-section-number">Topic 11</span> Applied Mediation Analysis</h1>
<div id="learning-goals-10" class="section level2 unnumbered">
<h2>Learning Goals</h2>
<ul>
<li>Understand a simulation approach for estimating effects of interest in mediation analysis</li>
<li>Learn to use the <code>mediation</code> R package</li>
<li>Use mediation analysis to answer research questions</li>
<li>Draw connections to the framework of sensitivity analyses for unmeasured confounding</li>
</ul>
<p><br><br><br><br></p>
</div>
<div id="discussion-4" class="section level2 unnumbered">
<h2>Discussion</h2>
<p><strong>What is the simulation approach for estimating mediation effects?</strong></p>
<ul>
<li>Parametric approach: assume we know the distribution of key quantities</li>
<li>Nonparametric approach (bootstrapping): we don’t assume we know the distribution of key quantities</li>
</ul>
<p><br><br><br></p>
<p>If key assumptions hold, we can use models to estimate mediation effects:</p>
<ul>
<li><span class="math inline">\(E[Y\mid A, M, C]\)</span></li>
<li><span class="math inline">\(E[M\mid A, C]\)</span></li>
</ul>
<p>Essentially, these models are <strong>structural</strong>: they describe average potential outcomes. If these models have an explicit and convenient form (like below)…</p>
<p><span class="math display">\[ E[Y\mid A, M, C] = \theta_0 + \theta_1 A + \theta_2 M + \theta_3 AM + \theta_4&#39;C \]</span> <span class="math display">\[ E[M\mid A, C] = \beta_0 + \beta_1 A + \beta_2&#39;C \]</span></p>
<p>…there are formulas for the average mediation effects. (See Exercise 3 from Topic 10.)</p>
<p><br></p>
<p>But what if the <span class="math inline">\(E[Y\mid A, M, C]\)</span> and <span class="math inline">\(E[M\mid A, C]\)</span> models don’t allow for ready formulas?</p>
<p><br><br><br></p>
<p><strong>Situation 1: Parametric Approach</strong></p>
<p><strong>Key feature:</strong> We assume that we know the true sampling distribution of the parameter estimates from the <span class="math inline">\(E[Y\mid A, M, C]\)</span> and <span class="math inline">\(E[M\mid A, C]\)</span> models.</p>
<ol style="list-style-type: decimal">
<li>Fit the <span class="math inline">\(E[Y\mid A, M, C]\)</span> and <span class="math inline">\(E[M\mid A, C]\)</span> models. (Only do this once.)</li>
<li>Use the sampling distribution of the parameter estimates to randomly draw (simulate) a set of parameters. (Goal: will do this many times to quantify the sampling variability of our mediation effect estimates.)
<ul>
<li>These randomly drawn parameters define the <span class="math inline">\(Y\)</span> and <span class="math inline">\(M\)</span> models.</li>
<li>For each individual:
<ul>
<li>Simulate <span class="math inline">\(K\)</span> copies of <span class="math inline">\(M\)</span> under <span class="math inline">\(A = 0\)</span> and <span class="math inline">\(A = 1\)</span> using this individual’s <span class="math inline">\(C\)</span> values.</li>
<li>Use the simulated <span class="math inline">\(M\)</span> values to simulate the <span class="math inline">\(Y\)</span> values under both <span class="math inline">\(A = 0\)</span> and <span class="math inline">\(A = 1\)</span>.</li>
<li>Average the potential outcomes over the K copies. This provides an estimate of the individual-level potential outcomes.</li>
</ul></li>
<li>Average the individual-level potential outcomes. End up with one estimate each of <span class="math inline">\(E[Y^{1M_1}], E[Y^{1M_0}], E[Y^{0M_1}], E[Y^{0M_0}]\)</span></li>
<li>Subtract the appropriate values to obtain direct and indirect effects.</li>
</ul></li>
<li>Repeat step 2 <span class="math inline">\(B \geq 1000\)</span> times.</li>
<li>Finally, summarize:
<ul>
<li>Average the <span class="math inline">\(B\)</span> copies of the effect estimates to get one overall estimate for each effect.</li>
<li>Use the 2.5th and 97.5th percentiles to obtain a 95% confidence interval.</li>
</ul></li>
</ol>
<p><br><br><br></p>
<p><strong>Situation 2: Nonparametric Approach</strong></p>
<ol style="list-style-type: decimal">
<li>Resample the original dataset with replacement, maintaining the original sample size.</li>
<li>Using the resampled data, fit the <span class="math inline">\(E[Y\mid A, M, C]\)</span> and <span class="math inline">\(E[M\mid A, C]\)</span> models.
<ul>
<li>We use the models to simulate <span class="math inline">\(M\)</span> and <span class="math inline">\(Y\)</span>.</li>
<li>For each individual:
<ul>
<li>Simulate <span class="math inline">\(K\)</span> copies of <span class="math inline">\(M\)</span> under <span class="math inline">\(A = 0\)</span> and <span class="math inline">\(A = 1\)</span> using this individual’s <span class="math inline">\(C\)</span> values.</li>
<li>Use the simulated <span class="math inline">\(M\)</span> values to simulate the <span class="math inline">\(Y\)</span> values under both <span class="math inline">\(A = 0\)</span> and <span class="math inline">\(A = 1\)</span>.</li>
<li>Average the potential outcomes over the K copies. This provides an estimate of the individual-level potential outcomes.</li>
</ul></li>
<li>Average the individual-level potential outcomes. End up with one estimate each of <span class="math inline">\(E[Y^{1M_1}], E[Y^{1M_0}], E[Y^{0M_1}], E[Y^{0M_0}]\)</span></li>
<li>Subtract the appropriate values to obtain direct and indirect effects.</li>
</ul></li>
<li>Repeat steps 1 and 2 <span class="math inline">\(B \geq 1000\)</span> times.</li>
<li>Finally, summarize:
<ul>
<li>Average the <span class="math inline">\(B\)</span> copies of the effect estimates to get one overall estimate for each effect.</li>
<li>Use the 2.5th and 97.5th percentiles to obtain a 95% confidence interval.</li>
</ul></li>
</ol>
<p><br><br><br><br></p>
</div>
<div id="exercises-5" class="section level2 unnumbered">
<h2>Exercises</h2>
<p>A template Rmd is available <a href="template_rmds/11-applied-mediation-analysis.Rmd">here</a>.</p>
<p>Install the <code>mediation</code> package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;mediation&quot;</span>)</code></pre></div>
<div id="data-context" class="section level3 unnumbered">
<h3>Data context</h3>
<p>We’ll look at data from a study (cited below) of how the framing of immigration issues in a video affects attitudes about immigration.</p>
<p><em>Brader, T., Valentino, N. and Suhay, E. (2008). What triggers public opposition to immigration? Anxiety, group cues, and immigration threat. American Journal of Political Science 52, 4, 959–978.</em></p>
<p><br></p>
<p>In this study authors constructed different videos of a news story about immigration, and the video was framed and portrayed in 4 different ways. Study participants were randomly assigned to watch one of the 4 videos and were subsequently asked questions related to their stances on immigration.</p>
<p>Outcome variables: (We’ll focus on <code>cong_mesg</code>.)</p>
<ul>
<li><code>immigr</code>: A four-point scale measuring subjects’ attitudes toward increased immigration. Larger values indicate more negative attitudes.</li>
<li><code>english</code>: A four-point scale indicating whether subjects favor or oppose a law making English the official language of the U.S.</li>
<li><code>cong_mesg</code>: Whether subjects requested sending an anti-immigration message to Congress (1 = yes, 0 = no).</li>
<li><code>anti_info</code>: Whether subjects wanted to receive information from anti-immigration organizations (1 = yes, 0 = no).</li>
</ul>
<p>Treatment variables: (We’ll focus on <code>treat</code>.)</p>
<ul>
<li><code>tone</code>: 1st treatment; whether the news story is framed positively (0) or negatively (1).</li>
<li><code>eth</code>: 2nd treatment; whether the news story features a European (0) or Latino (1) immigrant.</li>
<li><code>treat</code>: Product of the two treatment variables. 1 if the news story was framed negatively AND about Latino immigrants. 0 otherwise.</li>
</ul>
<p>Mediator variables: (We’ll focus on <code>emo</code> and <code>p_harm</code>.)</p>
<ul>
<li><code>emo</code>: Measure of subjects’ negative feeling during the experiment. A numeric scale ranging between 3 and 12 where 3 indicates the most negative feeling.</li>
<li><code>anx</code>: A four-point scale measuring subjects’ anxiety about increased immigration.</li>
<li><code>p_harm</code>: Subjects’ perceived harm caused by increased immigration. A numeric scale between 2 and 8.</li>
</ul>
<p>Confounders:</p>
<ul>
<li><code>age</code>: Subjects’ age.</li>
<li><code>educ</code>: Subjects’ highest educational attainments.</li>
<li><code>gender</code>: Subjects’ gender.</li>
<li><code>income</code>: Subjects’ income, measured as a 19-point scale.</li>
</ul>
<p>Load required packages and the data as below:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(mediation)
<span class="kw">library</span>(MASS)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)

<span class="kw">data</span>(framing)</code></pre></div>
<blockquote>
<p><strong>Research question:</strong> Is the effect of the framing treatment mediated more by negative emotions (<code>emo</code>) or by perceived harm (<code>p_harm</code>)?</p>
</blockquote>
<p><br><br></p>
</div>
<div id="exercise-1-4" class="section level3 unnumbered">
<h3>Exercise 1</h3>
<p>The causal diagram underlying this investigation is below:</p>
<p><img src="causal_manual_files/figure-html/unnamed-chunk-41-1.png" width="672" style="display: block; margin: auto;" /></p>
<ol style="list-style-type: lower-alpha">
<li><p>This study was a randomized experiment, in which participants were assigned to the different treatment groups. Given this, what do you notice about the DAG structure, and why does this make sense?</p></li>
<li><p>In the context of this study, what assumptions are we making when we use modeling to estimate direct and indirect effects? (Phrase this in terms of the specific variables in the study. This will help with the next part.)</p></li>
<li><p>After thinking about the assumptions we’re making, do you agree with this DAG? Draw an updated DAG reflecting your expert knowledge using <a href="http://www.dagitty.net/dags.html#">DAGitty</a>, and include the DAG in your document. (You can start from the DAGitty code above. Copy and paste the <code>dag {...}</code> part into the “Model code” pane on the right.)</p></li>
</ol>
<p><br><br></p>
</div>
<div id="exercise-2-4" class="section level3 unnumbered">
<h3>Exercise 2</h3>
<p>Despite your excellent updated expert knowledge DAG, we’ll have to proceed with the measured variables (i.e., in the context of the original DAG shown above).</p>
<ul>
<li>Fit an appropriate model for the mediator (<code>emo</code>), and call this model <code>med_mod</code>.</li>
<li>Fit an appropriate model for the outcome (<code>cong_mesg</code>), and call this model <code>out_mod</code>.</li>
</ul>
<p>Make sure to use visualizations to specify an appropriate form for the model. Recall that you can add code like below to your plots to show observed trends in blue and predicted trends from different model formulations in red:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## For a quantitative outcome:
<span class="op">+</span><span class="st"> </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;loess&quot;</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>, <span class="dt">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="op">+</span>
<span class="kw">geom_smooth</span>(<span class="dt">formula =</span> y<span class="op">~</span><span class="kw">poly</span>(x,<span class="dv">2</span>), <span class="dt">method=</span><span class="st">&quot;lm&quot;</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>)

## For a binary outcome:
<span class="op">+</span><span class="st"> </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;loess&quot;</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>, <span class="dt">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="op">+</span>
<span class="kw">geom_smooth</span>(<span class="dt">formula =</span> y<span class="op">~</span><span class="kw">poly</span>(x,<span class="dv">2</span>), <span class="dt">method=</span><span class="st">&quot;glm&quot;</span>, <span class="dt">method.args=</span><span class="kw">list</span>(<span class="dt">family=</span><span class="st">&quot;binomial&quot;</span>), <span class="dt">se =</span> <span class="ot">FALSE</span>, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>)</code></pre></div>
<p><br><br></p>
</div>
<div id="exercise-3-4" class="section level3 unnumbered">
<h3>Exercise 3</h3>
<p>With the mediator and outcome models fit, we can use the core function in the <code>mediation</code> package: <code>mediate()</code>. The code below performs the simulation method to estimate mediation effects with <span class="math inline">\(B = 1000\)</span>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">394</span>)
mediate_out &lt;-<span class="st"> </span><span class="kw">mediate</span>(med_mod, out_mod, <span class="dt">treat =</span> <span class="st">&quot;treat&quot;</span>, <span class="dt">mediator =</span> <span class="st">&quot;emo&quot;</span>, <span class="dt">robustSE =</span> <span class="ot">TRUE</span>, <span class="dt">sims =</span> <span class="dv">1000</span>)
<span class="kw">summary</span>(mediate_out)</code></pre></div>
<p>There’s a lot in this output! When learning a new package (a great skill to have!), it is <em>essential</em> to visit the documentation. The <a href="https://cran.r-project.org/package=mediation">landing page</a> for the package will always have a reference manual containing the documentation for individual functions, but more sometimes, a more useful <strong>vignette</strong> will be available.</p>
<p>Open the vignette titled “mediation” (not “mediation-old”) and read the third page describing how different effects are defined. The notation is a little different than what we have defined - if you have questions, ask the instructor.</p>
<ul>
<li>Which of the ACMEs (control or treated) corresponds to an effect we have defined? Which effect is it? Give an interpretation of this measure. (Note: these effects are expressed as probability differences.) Based on the confidence interval, do we have evidence for a true effect in the broader population?</li>
<li>Which of the ADEs (control or treated) corresponds to an effect we have defined? Which effect is it? Give an interpretation of this measure. Based on the confidence interval, do we have evidence for a true effect in the broader population?</li>
<li>How large is the NIE relative to the total effect and how does this move us toward answering our research question?</li>
</ul>
<p><br><br></p>
</div>
<div id="exercise-4-2" class="section level3 unnumbered">
<h3>Exercise 4</h3>
<p>Now perform a mediation analysis using <code>p_harm</code> as the mediator of interest. This includes:</p>
<ul>
<li>Fitting appropriate mediator and outcome models</li>
<li>Using the <code>mediate()</code> function to estimate the mediation effects</li>
</ul>
<p>Cite relevant numbers from the <code>mediate()</code> output to answer our original research question. &gt; Research question: Is the effect of the framing treatment mediated more by negative emotions or by perceived harm?</p>
<p><br><br></p>
</div>
<div id="exercise-5-2" class="section level3 unnumbered">
<h3>Exercise 5</h3>
<p>Let’s not forget about your improved expert DAG. Describe in detail (but don’t actually implement) how we could implement a sensitivity analysis to assess sensitivity of the above results to unmeasured confounding.</p>
<p><br><br></p>
</div>
<div id="exercise-6-1" class="section level3 unnumbered">
<h3>Exercise 6</h3>
<p>The controlled direct effect is not estimated by this package! Identify the specific place where the simulation approach could be changed to estimate the CDE.</p>

</div>
</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="graphical-structure-of-mediation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="rct-and-iv-designs.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
